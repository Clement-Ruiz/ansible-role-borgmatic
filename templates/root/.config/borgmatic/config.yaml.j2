# This file is generated by Ansible
#  DO NOT EDIT THIS FILE BY HAND -- YOUR CHANGES WILL BE OVERWRITTEN
#

location:
    source_directories:
{% for directory in borgmatic_config_source_directories %}
        - {{ directory }}
{% endfor %}
    repositories:
{% for repository in borgmatic_config_repositories %}
        - {{ repository }}
{% endfor %}
{% if borgmatic_config_exclude_patterns %}
    exclude_patterns:
{% for repository in borgmatic_config_repositories %}
        - {{ repository }}
{% endfor %}
{% endif %}

{% if borgmatic_config_encryption_passphrase is defiened or
      borgmatic_config_encryption_passcommand is defined or
      borgmatic_config_ssh_command is defiened or
      borgmatic_config_archive_name_format is defined
%}
storage:
{% if borgmatic_config_encryption_passphrase is defiened %}
  encryption_passphrase: {{ borgmatic_config_encryption_passphrase }}
{% endif %}
{% if borgmatic_config_encryption_passcommand is defiened %}
  encryption_passcommand: {{ borgmatic_config_encryption_passcommand }}
{% endif %}
{% if borgmatic_config_ssh_command is defiened %}
  ssh_command: {{ borgmatic_config_ssh_command }}
{% endif %}
{% if borgmatic_config_archive_name_format is defiened %}
  archive_name_format: {{ borgmatic_config_archive_name_format }}
{% endif %}
{% endif %}

{% if borgmatic_config_retention %}
retention:
  {{ borgmatic_config_retention | to_yaml | indent(1)}}
{% endif %}

{% if borgmatic_config_consistency_checks is defined or
      borgmatic_config_consistency_check_repositories is defined or
      borgmatic_config_consistency_check_last is defined or
      borgmatic_config_consistency_prefix is defined
%}
consistency:
{% if borgmatic_config_consistency_checks %}
  checks:
{% for check in borgmatic_config_consistency_checks %}
    - {{ check }}
{% endfor %}
{% endif %}
{% if borgmatic_config_consistency_check_repositories %}
  check_repositories:
{% for repository in borgmatic_config_consistency_check_repositories %}
    - {{ repository }}
{% endfor %}
{% endif %}
{% if borgmatic_config_consistency_check_last is defiened %}
  check_last: {{ borgmatic_config_consistency_check_last }}
{% endif %}
{% if borgmatic_config_consistency_prefix is defiened %}
  prefix: {{ borgmatic_config_consistency_prefix }}
{% endif %}
{% endif %}

{% if borgmatic_config_hooks_before is defined or
      borgmatic_config_hooks_after is defined or
      borgmatic_config_hooks_on_error is defined
%}
hooks:
{% if borgmatic_config_hooks_before %}
  checks:
{% for command in borgmatic_config_hooks_before %}
    - {{ command }}
{% endfor %}
{% endif %}
{% if borgmatic_config_hooks_after %}
  checks:
{% for command in borgmatic_config_hooks_after %}
    - {{ command }}
{% endfor %}
{% endif %}
{% if borgmatic_config_hooks_on_error %}
  checks:
{% for command in borgmatic_config_hooks_on_error %}
    - {{ command }}
{% endfor %}
{% endif %}
{% endif %}
